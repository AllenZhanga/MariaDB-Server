CREATE TABLE t0 (a VARCHAR(64));
INSERT INTO t0 VALUES
('CHARACTER SET DEFAULT'),
('CHARACTER SET latin1'),
('CHARACTER SET utf8mb4'),
('COLLATE DEFAULT'),
('COLLATE utf8mb4_bin'),
('COLLATE latin1_bin');
CREATE TABLE clauses
(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
cl1 VARCHAR(64) NOT NULL,
cl2 VARCHAR(64) NOT NULL,
cl3 VARCHAR(64) NOT NULL,
clause_count INT GENERATED ALWAYS AS ((cl1<>'') + (cl2<>'') + (cl3<>'')),
clauses TEXT GENERATED ALWAYS AS (CONCAT(cl1,
IF(cl2='','',' '), cl2,
IF(cl3='','',' '), cl3))
);
INSERT INTO clauses (cl1, cl2, cl3)
SELECT '' AS cl1, '' AS cl2, '' AS cl3;
INSERT INTO clauses (cl1, cl2, cl3)
SELECT t0.a AS cl1, '' AS cl2, '' AS cl3
FROM t0;
INSERT INTO clauses (cl1, cl2, cl3)
SELECT t0.a AS cl1, t2.a AS cl2, '' AS cl3
FROM t0 t0, t0 t2;
INSERT INTO clauses (cl1, cl2, cl3)
SELECT t0.a AS cl1, t2.a AS cl2, t3.a AS cl3
FROM t0 t0, t0 t2, t0 t3;
DROP TABLE t0;
CREATE TABLE results_template
(
id INT NOT NULL PRIMARY KEY,
result TEXT NOT NULL
);
CREATE PROCEDURE diff_result_tables(table1 VARCHAR(64), table2 VARCHAR(64))
BEGIN
DECLARE query_counts TEXT DEFAULT
'SELECT '
    ' COUNT(*),'
    ' SUM(t1.result=t2.result),'
    ' SUM(t1.result<>t2.result) '
    'FROM table1 t1 JOIN table2 t2 USING (id)';
DECLARE query_records TEXT DEFAULT
'SELECT '
    ' '''' AS ``,'
    ' clauses.clauses AS query,'
    ' t1.result AS `aaa`,'
    ' t2.result AS `bbb` '
    ' FROM table1 t1'
    ' JOIN table2 t2 USING (id)'
    ' JOIN clauses USING (id) '
    ' WHERE t1.result<>t2.result ORDER BY t1.id';
SET query_counts=REPLACE(query_counts, 'table1', table1);
SET query_counts=REPLACE(query_counts, 'table2', table2);
EXECUTE IMMEDIATE query_counts;
SET query_records=REPLACE(query_records, 'table1', table1);
SET query_records=REPLACE(query_records, 'table2', table2);
EXECUTE IMMEDIATE query_records;
END;
$$
CREATE PROCEDURE exec(query_bootstrap TEXT,
query_pattern TEXT,
query_cleanup TEXT,
id INT,
clauses TEXT)
BEGIN
DECLARE query TEXT DEFAULT REPLACE(query_pattern, '/*CSCL*/',clauses);
DECLARE result TEXT DEFAULT NULL;
DECLARE CONTINUE HANDLER FOR
1302,  /*ER_CONFLICTING_DECLARATIONS*/
1253   /*ER_COLLATION_CHARSET_MISMATCH*/
BEGIN
GET DIAGNOSTICS CONDITION 1 result=MESSAGE_TEXT;
SET result=CONCAT('ERROR: ', result);
END;
IF query_bootstrap<>''
  THEN
EXECUTE IMMEDIATE query_bootstrap;
END IF;
EXECUTE IMMEDIATE query;
IF result IS NULL
THEN
IF query_pattern LIKE '%DATABASE%'
    THEN
SET result=(SELECT CONCAT('CHARACTER SET ', DEFAULT_CHARACTER_SET_NAME,
' COLLATE ', DEFAULT_COLLATION_NAME)
FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME='db1');
ELSE
SET result=(SELECT CONCAT('CHARACTER SET ', SUBSTRING_INDEX(TABLE_COLLATION,'_',1),
' COLLATE ', TABLE_COLLATION)
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME='t1' AND TABLE_SCHEMA='test1');
END IF;
END IF;
INSERT INTO results (id, result) VALUES (id, result);
IF query_cleanup<>''
  THEN
EXECUTE IMMEDIATE query_cleanup;
END IF;
END;
$$
CREATE PROCEDURE show_results(clause_count_arg INT)
BEGIN
SELECT '' AS ``, CONCAT(clause_count_arg, ' clauses') AS `TEST:`;
SELECT '' AS ``, COUNT(*) AS `TOTAL`
  FROM results JOIN clauses USING (id)
WHERE clauses.clause_count=clause_count_arg;
-- Display erroneous results
SELECT '' AS ``, COUNT(*) AS `ERROR`
  FROM results JOIN clauses USING (id)
WHERE clauses.clause_count=clause_count_arg
AND result RLIKE '^ERROR';
SELECT '' AS ``, clauses AS query, result
FROM results JOIN clauses USING (id)
WHERE clauses.clause_count=clause_count_arg
AND result RLIKE '^ERROR' ORDER BY id;
-- Display successfull results
SELECT '' AS ``, COUNT(*) AS `OK`
  FROM results JOIN clauses USING (id)
WHERE clauses.clause_count=clause_count_arg
AND result NOT RLIKE '^ERROR';
SELECT '' AS ``, clauses AS query, result
FROM results JOIN clauses USING (id)
WHERE clauses.clause_count=clause_count_arg
AND result NOT RLIKE '^ERROR' ORDER BY id;
END;
$$
CREATE PROCEDURE run(query_bootstrap TEXT,
query TEXT,
query_cleanup TEXT,
clause_count_arg INT)
BEGIN
FOR rec IN (SELECT * FROM clauses WHERE clause_count=clause_count_arg)
DO
CALL exec(query_bootstrap, query, query_cleanup, rec.id, rec.clauses);
END FOR;
END;
$$
CREATE PROCEDURE run_all(query_bootstrap TEXT, query TEXT, query_cleanup TEXT)
BEGIN
DECLARE msg TEXT;
DECLARE count_results INT;
DECLARE count_clauses INT;
FOR i IN 0..3
DO
CALL run(query_bootstrap, query, query_cleanup, i);
END FOR;
SET count_clauses=(SELECT COUNT(*) FROM clauses);
SET count_results=(SELECT COUNT(*) FROM results);
IF (count_results<>count_clauses)
THEN
SET msg=CONCAT('Got ', count_results,' rows in `results`; ',
'Expected ', count_clauses, ' rows');
SIGNAL SQLSTATE '45000'
      SET MYSQL_ERRNO=30001,
MESSAGE_TEXT=msg;
END IF;
END;
$$
CREATE PROCEDURE show_results_all()
BEGIN
FOR i IN 0..3
DO
CALL show_results(i);
END FOR;
END;
$$
#
# Running CREATE DATABASE tests
# Displaying all results
#
SET @@collation_server=utf8mb4_unicode_ci;
CREATE TABLE results LIKE results_template;
CALL run_all('','CREATE DATABASE db1 /*CSCL*/', 'DROP DATABASE IF EXISTS db1');
CALL show_results_all();
	
TEST:	0 clauses
	
TOTAL	1
	
ERROR	0
	
OK	1
	
query	
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
	
TEST:	1 clauses
	
TOTAL	6
	
ERROR	0
	
OK	6
	
query	CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
TEST:	2 clauses
	
TOTAL	36
	
ERROR	16
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
OK	20
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET latin1 CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE DEFAULT CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE latin1_bin CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET latin1 COLLATE DEFAULT
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET latin1 COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	COLLATE latin1_bin COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
TEST:	3 clauses
	
TOTAL	216
	
ERROR	156
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET latin1 CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET latin1 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 COLLATE DEFAULT CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin COLLATE latin1_bin CHARACTER SET DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_general_ci' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 CHARACTER SET latin1
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_general_ci' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin CHARACTER SET latin1
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin CHARACTER SET latin1
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	CHARACTER SET latin1 CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_swedish_ci' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET latin1 CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 COLLATE DEFAULT CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_swedish_ci' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin COLLATE latin1_bin CHARACTER SET utf8mb4
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 COLLATE DEFAULT
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET latin1 COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 COLLATE DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin COLLATE latin1_bin COLLATE DEFAULT
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET latin1 CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_swedish_ci' and 'COLLATE utf8mb4_bin'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE latin1_bin CHARACTER SET latin1 COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_general_ci' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET latin1 COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_swedish_ci' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_general_ci' and 'COLLATE utf8mb4_bin'
	
query	COLLATE DEFAULT COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET latin1 COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin COLLATE latin1_bin COLLATE utf8mb4_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET DEFAULT (utf8mb4)'
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin CHARACTER SET DEFAULT COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT CHARACTER SET latin1 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET DEFAULT (utf8mb4)' and 'CHARACTER SET latin1'
	
query	CHARACTER SET utf8mb4 CHARACTER SET latin1 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET utf8mb4' and 'CHARACTER SET latin1'
	
query	COLLATE DEFAULT CHARACTER SET latin1 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_swedish_ci' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin CHARACTER SET latin1 COLLATE latin1_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET latin1 CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'CHARACTER SET latin1' and 'CHARACTER SET utf8mb4'
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_general_ci' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin CHARACTER SET utf8mb4 COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	CHARACTER SET latin1 COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_swedish_ci' and 'COLLATE latin1_bin'
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_general_ci' and 'COLLATE latin1_bin'
	
query	COLLATE DEFAULT COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE DEFAULT'
	
query	COLLATE latin1_bin COLLATE DEFAULT COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE DEFAULT'
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	CHARACTER SET latin1 COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: COLLATION 'utf8mb4_bin' is not valid for CHARACTER SET 'latin1'
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE DEFAULT COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE utf8mb4_bin'
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
query	COLLATE latin1_bin COLLATE utf8mb4_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE latin1_bin' and 'COLLATE utf8mb4_bin'
	
query	CHARACTER SET DEFAULT COLLATE latin1_bin COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	CHARACTER SET utf8mb4 COLLATE latin1_bin COLLATE latin1_bin
result	ERROR: COLLATION 'latin1_bin' is not valid for CHARACTER SET 'utf8mb4'
	
query	COLLATE DEFAULT COLLATE latin1_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE DEFAULT' and 'COLLATE latin1_bin'
	
query	COLLATE utf8mb4_bin COLLATE latin1_bin COLLATE latin1_bin
result	ERROR: Conflicting declarations: 'COLLATE utf8mb4_bin' and 'COLLATE latin1_bin'
	
OK	60
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin CHARACTER SET DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET latin1 CHARACTER SET latin1 CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE DEFAULT CHARACTER SET latin1 CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE latin1_bin CHARACTER SET latin1 CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	CHARACTER SET latin1 COLLATE DEFAULT CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	CHARACTER SET latin1 COLLATE latin1_bin CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	COLLATE latin1_bin COLLATE latin1_bin CHARACTER SET latin1
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin CHARACTER SET utf8mb4
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET latin1 CHARACTER SET latin1 COLLATE DEFAULT
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	COLLATE DEFAULT CHARACTER SET latin1 COLLATE DEFAULT
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT CHARACTER SET utf8mb4 COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET DEFAULT COLLATE DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET latin1 COLLATE DEFAULT COLLATE DEFAULT
result	CHARACTER SET latin1 COLLATE latin1_swedish_ci
	
query	CHARACTER SET utf8mb4 COLLATE DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT COLLATE DEFAULT
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
	
query	CHARACTER SET DEFAULT CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin CHARACTER SET DEFAULT COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET DEFAULT COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	COLLATE utf8mb4_bin COLLATE utf8mb4_bin COLLATE utf8mb4_bin
result	CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
	
query	CHARACTER SET latin1 CHARACTER SET latin1 COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	COLLATE latin1_bin CHARACTER SET latin1 COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	CHARACTER SET latin1 COLLATE latin1_bin COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
	
query	COLLATE latin1_bin COLLATE latin1_bin COLLATE latin1_bin
result	CHARACTER SET latin1 COLLATE latin1_bin
ALTER TABLE results RENAME TO results_create_db;
#
# Running ALTER DATABASE tests
#
CREATE TABLE results LIKE results_template;
CALL run_all('CREATE DATABASE db1 CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci',
'ALTER DATABASE db1 COMMENT '''' /*CSCL*/',
'DROP DATABASE db1');
ALTER TABLE results RENAME TO results_alter_db;
# Displaying results that differ in CREATE DATABASE and ALTER DATABASE
# Only queries with no clauses or with COLLATE DEFAULT alone
# (without any other COLLATE or CHARACTER SET clauses)
# should differ:
# CREATE DATABASE db1 COMMENT '' [COLLATE DEFAULT]; -- means @@collation_server
# ALTER DATABASE db1 COMMENT '' COLLATE DEFAULT; -- means "the default collation of the current character set of db1"
# ALTER DATABASE db1 COMMENT ''; -- means "keep the current db1 collation"
CALL diff_result_tables('results_create_db', 'results_alter_db');
COUNT(*)	259
SUM(t1.result=t2.result)	255
SUM(t1.result<>t2.result)	4
	
query	
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci
	
query	COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
#
# Running CREATE TABLE tests
#
CREATE DATABASE test1 COLLATE utf8mb4_unicode_ci;
CREATE TABLE results LIKE results_template;
CALL run_all('',
'CREATE TABLE test1.t1 (a int) /*CSCL*/',
'DROP TABLE IF EXISTS test1.t1');
ALTER TABLE results RENAME TO results_create_table;
# Expect no difference to CREATE DATABASE
CALL diff_result_tables('results_create_db', 'results_create_table');
COUNT(*)	259
SUM(t1.result=t2.result)	259
SUM(t1.result<>t2.result)	0
DROP DATABASE test1;
#
# Running ALTER TABLE tests
#
CREATE DATABASE test1 COLLATE utf8mb4_unicode_ci;
CREATE TABLE results LIKE results_template;
CALL run_all('CREATE TABLE test1.t1(a INT) CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci',
'ALTER TABLE test1.t1 COMMENT '''' /*CSCL*/',
'DROP TABLE test1.t1');
ALTER TABLE results RENAME TO results_alter_table;
# Only queries with no clauses or with COLLATE DEFAULT alone
# (without any other COLLATE or CHARACTER SET clauses)
# should differ:
# CREATE TABLE test1.t1 COMMENT '' [COLLATE DEFAULT]; -- means "the default collation of the database test1"
# ALTER TABLE test1.t1 COMMENT '' COLLATE DEFAULT; -- means "the default collation of the current character set of test1.t1"
# ALTER TABLE test1.t1 COMMENT ''; -- means "keep the current collation of test.t1"
CALL diff_result_tables('results_create_table', 'results_alter_table');
COUNT(*)	259
SUM(t1.result=t2.result)	255
SUM(t1.result<>t2.result)	4
	
query	
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci
	
query	COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
	
query	COLLATE DEFAULT COLLATE DEFAULT COLLATE DEFAULT
aaa	CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci
bbb	CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci
DROP DATABASE test1;
DROP PROCEDURE show_results_all;
DROP PROCEDURE run_all;
DROP PROCEDURE show_results;
DROP PROCEDURE exec;
DROP PROCEDURE run;
DROP PROCEDURE diff_result_tables;
DROP TABLE clauses;
DROP TABLE results_template;
DROP TABLE results_create_db;
DROP TABLE results_alter_db;
DROP TABLE results_create_table;
DROP TABLE results_alter_table;
