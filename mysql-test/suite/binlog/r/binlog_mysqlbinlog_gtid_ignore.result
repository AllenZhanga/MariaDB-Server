###############################
#      Test Setup
###############################
SET timestamp=1000000000;
RESET MASTER;
SET @@session.gtid_domain_id= 0;
SET @@session.server_id= 1;
CREATE TABLE t1 (a int);
SET @@session.server_id= 2;
CREATE TABLE t2 (a int);
INSERT INTO t2 values (3);
SET @@session.gtid_domain_id= 1;
SET @@session.server_id= 1;
CREATE TABLE t3 (a int);
INSERT INTO t3 values (4);
SET @@session.server_id= 3;
CREATE TABLE t4 (a int);
INSERT INTO t4 values (5);
SET @@session.gtid_domain_id= 0;
SET @@session.server_id= 1;
INSERT INTO t1 values (1);
SET @@session.gtid_domain_id= 2;
SET @@session.server_id= 1;
CREATE TABLE t5 (a int);
INSERT INTO t5 values (6);
SET @@session.gtid_domain_id= 0;
SET @@session.server_id= 1;
INSERT INTO t1 values (2);
FLUSH LOGS;
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t3;
DROP TABLE t4;
DROP TABLE t5;
RESET MASTER;
###############################
#      Test Cases
###############################
#
#   Test Case 1:
#   --ignore-domain-ids standalone
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-domain-ids=0,1 | MYSQL
DROP TABLE t5;
#
#   Test Case 2:
#   --do-domain-ids standalone
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-domain-ids=0,2 | MYSQL
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t5;
#
#   Test Case 3:
#   --ignore-server-ids standalone
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-server-ids=2,3 | MYSQL
DROP TABLE t1;
DROP TABLE t3;
DROP TABLE t5;
#
#   Test Case 4:
#   --do-server-ids standalone
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-server-ids=2,3 | MYSQL
DROP TABLE t2;
DROP TABLE t4;
#
#   Test Case 5:
# --ignore-domain-ids with --ignore-server-ids intersects the datasets
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-server-ids=1,3 --ignore-domain-ids=1,2 | MYSQL
DROP TABLE t2;
#
#   Test Case 6:
# --do-domain-ids with GTID range intersects the datasets
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-domain-ids=0 --start-position=0-1-0 --stop-position=0-1-4 | MYSQL
DROP TABLE t1;
DROP TABLE t2;
#
#   Test Case 7:
# --ignore-server-ids with GTID range intersects the datasets
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-server-ids=2,3 --start-position=0-1-0 --stop-position=0-1-4 | MYSQL
DROP TABLE t1;
DROP TABLE t3;
#
#   Test Case 8:
# --ignore-domain-ids, --ignore-server-ids, and GTID range
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-domain-ids=0 --ignore-server-ids=2,3 --stop-position=0-1-4 | MYSQL
DROP TABLE t3;
#
#   Test Case 9:
# If the same domain id rule is specified multiple times, only the values
# from the last specification will be used
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-domain-ids=0,1 --do-domain-ids=2 | MYSQL
DROP TABLE t5;
#
#   Test Case 10:
# --server-id and --do-server-ids are aliases and the latter will
# override the former
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-server-ids=1,2 --server-id=3 | MYSQL
DROP TABLE t4;
#
#   Test Case 11:
# --ignore-domain-ids, --ignore-server-ids, and multiple GTID ranges
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-domain-ids=0 --ignore-server-ids=2,3 --start-position=0-1-0,1-1-0 --stop-position=1-1-2,0-1-4| MYSQL
DROP TABLE t3;
##############################
#      Error Cases
##############################
#
#   Error Case 1:
#   --ignore-domain-ids and --do-domain-ids both specified
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-domain-ids=0 --do-domain-ids=1
#
#   Error Case 2:
#   --ignore-server-ids and --do-server-ids both specified
# MYSQL_BINLOG BINLOG_FILE_PARAM --do-server-ids=1 --ignore-server-ids=2
#
#   Error Case 3:
#   Invalid ID number provided
# MYSQL_BINLOG BINLOG_FILE_PARAM --ignore-server-ids=-1
##############################
#      Cleanup
##############################
SET @@global.gtid_domain_id= 0;
SET @@global.server_id= 1;
